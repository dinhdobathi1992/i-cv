/* Core Effect Styles */
:root {
  --icon-opacity: 0.25;
  --icon-scale: 3.4;
  --icon-saturate: 5;
  --icon-brightness: 1.3;
  --border-width: 3;
  --border-blur: 0;
  --border-saturate: 4.2;
  --border-brightness: 2.5;
  --border-contrast: 2.5;
}

/* Card Container */
.highlight-card,
article {
  position: relative;
  /* Ensure container-type is NOT set to size to avoid collapse */
  /* container-type: size; <--- Removed as per fix */
  text-align: center;
  border-radius: 12px;
  overflow: hidden;
  /* background: var(--card-bg); */
  /* Use website's theme */
  cursor: pointer;
}

/* 1. Underlying Blur Layer (The "Icon" glow) */
.highlight-card .icon-blur-container,
article .img-container {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  transform: translateZ(0);

  /* The SVG Blur Filter */
  filter: url(#blur) saturate(var(--icon-saturate)) brightness(var(--icon-brightness));

  /* Movement logic */
  translate: calc(var(--pointer-x, 0) * 50px) calc(var(--pointer-y, 0) * 50px);
  scale: var(--icon-scale);
  opacity: var(--icon-opacity);
  will-change: transform, filter;
  pointer-events: none;
  z-index: 0;

  /* Smooth transition for reset */
  transition: transform 0.2s cubic-bezier(0.2, 0, 0.2, 1);
}

.highlight-card .icon-blur-container .highlight-icon,
article .img-container img {
  /* This element is what gets blurred */
  width: 100px;
  /* Adjust size */
  max-width: 100%;
}

/* 2. Glass Border Effect */
.highlight-card::after,
article::after {
  content: '';
  position: absolute;
  pointer-events: none;
  inset: 0;
  border-radius: inherit;

  /* Border thickness */
  border: calc(var(--border-width) * 1px) solid transparent;

  /* Glass effect on border */
  backdrop-filter: blur(calc(var(--border-blur) * 1px)) saturate(var(--border-saturate)) brightness(var(--border-brightness)) contrast(var(--border-contrast));
  -webkit-backdrop-filter: blur(calc(var(--border-blur) * 1px)) saturate(var(--border-saturate)) brightness(var(--border-brightness)) contrast(var(--border-contrast));

  /* Masking to show only border */
  mask: linear-gradient(#fff 0 0) border-box, linear-gradient(#fff 0 0) padding-box;
  -webkit-mask: linear-gradient(#fff 0 0) border-box, linear-gradient(#fff 0 0) padding-box;
  mask-composite: exclude;
  -webkit-mask-composite: xor;

  z-index: 3;
  transform: translateZ(0);
}

/* 3. Content Stacking */
.highlight-card>*:not(.icon-blur-container),
article>*:not(.img-container) {
  position: relative;
  z-index: 1;
}

/* Hide SVG filter element */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}